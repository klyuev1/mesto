(()=>{"use strict";var t={formSelector:".popup__form",inputSelector:".popup__input",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button_disabled"};function e(t,e){t.textContent=e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}var o=function(){function t(e,n,r,o,i,u,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._link=e.link,this._name=e.name,this._likes=e.likes.length,this._cardId=e._id,this._likeStatus=!1,this._userId=r,this._handleCardDelete=i,this._handleLike=u,this._handleDislike=a,this._cardTemplateSelector=n,this._handleCardClick=o}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"likesSum",value:function(t){this._likes=t.likes,this._elementLikeText.textContent=this._likes.length}},{key:"likeButton",value:function(){this._elementLike.classList.add("element__like_active"),this._likeStatus=!0}},{key:"dislikeButton",value:function(){this._elementLike.classList.remove("element__like_active"),this._likeStatus=!1}},{key:"_toggleLike",value:function(){!1===this._likeStatus?this._handleLike(this):this._handleDislike(this)}},{key:"_setEventListeners",value:function(){var t=this;this._elementLike.addEventListener("click",(function(){return t._toggleLike()})),this._deleteCardButton.addEventListener("click",(function(){t._handleCardDelete(t._cardId,t._element)})),this._cardZoom.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)}))}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".element__image"),this._elementTitle=this._element.querySelector(".element__title"),this._elementLike=this._element.querySelector(".element__like"),this._deleteCardButton=this._element.querySelector(".element__remove"),this._cardZoom=this._element.querySelector(".element__image-button"),this._elementLikeText=this._element.querySelector(".element__like-text"),this._elementImage.src=this._link,this._elementImage.alt=this._name,this._elementTitle.textContent=this._name,this._elementLikeText.textContent=this._likes;for(var t=0;t<this._data.likes.length;t++)this._data.likes[t]._id===this._userId&&this.likeButton();return this._data.owner._id!==this._userId&&this._deleteCardButton.remove(),this._setEventListeners(),this._element}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._form=n,this._inputList=Array.from(n.querySelectorAll(e.inputSelector)),this._submitButtonSelector=n.querySelector(e.submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){this._formError=this._form.querySelector(".".concat(t.id,"-error")),t.classList.add(this._inputErrorClass),this._formError.classList.add(this._errorClass),this._formError.textContent=e}},{key:"_hideInputError",value:function(t){this._formError=this._form.querySelector(".".concat(t.id,"-error")),t.classList.remove(this._inputErrorClass),this._formError.classList.remove(this._errorClass),this._formError.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_disableButton",value:function(){this._submitButtonSelector.classList.add(this._inactiveButtonClass),this._submitButtonSelector.disabled=!0}},{key:"_enableButton",value:function(){this._submitButtonSelector.classList.remove(this._inactiveButtonClass),this._submitButtonSelector.disabled=!1}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"setDefaultButton",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e),t._toggleButtonState()}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._container=document.querySelector(n),this._renderer=o}var e,n;return e=t,(n=[{key:"setItem",value:function(t){this._container.append(t)}},{key:"setNewItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}var h=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&i.closePopup()},(r=y(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popupSelector=document.querySelector(e),this._popupCloseButton=this._popupSelector.querySelector(".popup__button-close")}var e,n;return e=t,(n=[{key:"openPopup",value:function(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popupCloseButton.addEventListener("click",(function(){return t.closePopup()})),this._popupSelector.addEventListener("click",(function(e){e.currentTarget===e.target&&t.closePopup()}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},_.apply(this,arguments)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(r);if(o){var n=b(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleSubmitForm=e,n._formElement=n._popupSelector.querySelector(".popup__form"),n._inputList=n._formElement.querySelectorAll(".popup__input"),n._SubmitButton=n._formElement.querySelector(".popup__button-save"),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;_(b(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues(),t._SubmitButton)}))}},{key:"closePopup",value:function(){_(b(u.prototype),"closePopup",this).call(this),this._formElement.reset()}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},w.apply(this,arguments)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._cardImage=e._popupSelector.querySelector(".popup__card-image"),e._cardTitle=e._popupSelector.querySelector(".popup__card-title"),e}return e=u,(n=[{key:"openPopup",value:function(t,e){w(P(u.prototype),"openPopup",this).call(this),this._cardImage.src=e,this._cardImage.alt=t,this._cardTitle.textContent=t}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},L.apply(this,arguments)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleSubmitForm=e,n._formElement=n._popupSelector.querySelector(".popup__form"),n}return e=u,(n=[{key:"setData",value:function(t,e){this._cardId=t,this._element=e}},{key:"setEventListeners",value:function(){var t=this;L(T(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._cardId,t._element)}))}},{key:"closePopup",value:function(){L(T(u.prototype),"closePopup",this).call(this),this._formElement.reset()}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}var U=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(e),this._userOccupation=document.querySelector(n),this._userAvatar=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,occupation:this._userOccupation.textContent}}},{key:"setUserInfo",value:function(t,e){this._userName.textContent=t,this._userOccupation.textContent=e}},{key:"getUserAvatar",value:function(){return{avatar:this._userAvatar.textContent}}},{key:"setUserAvatar",value:function(t){this._userAvatar.src=t}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===x(o)?o:String(o)),r)}var o}var D=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var e,n;return e=t,(n=[{key:"_checkRes",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return t._checkRes(e)}))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(e){return t._checkRes(e)}))}},{key:"patchUserInfo",value:function(t,e){var n=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:e})}).then((function(t){return n._checkRes(t)}))}},{key:"postNewCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._checkRes(t)}))}},{key:"likeCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._checkRes(t)}))}},{key:"dislikeCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkRes(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkRes(t)}))}},{key:"patchAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){return e._checkRes(t)}))}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),N=document.querySelector(".profile__button-add"),V=document.querySelector(".profile__button-edit"),F=document.querySelector(".popup__input[name=name]"),J=document.querySelector(".popup__input[name=occupation]"),G=document.querySelector(".popup__form[name=card]"),H=document.querySelector(".popup__form[name=profile]"),M=document.querySelector(".popup__form[name=card]"),Z=document.querySelector(".profile__avatar-button"),z=document.querySelector(".popup__form[name=update]");function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K=null,Q="",W=new D({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"64e76916-bb9d-45f2-aa0a-555c04a49e1a","Content-Type":"application/json"}});function X(t){return new o(t,"#element",Q,et,nt,Y,tt).generateCard()}function Y(t){W.likeCard(t._cardId).then((function(e){t.likesSum(e),t.likeButton()})).catch((function(t){console.log(t)}))}function tt(t){W.dislikeCard(t._cardId).then((function(e){t.likesSum(e),t.dislikeButton()})).catch((function(t){console.log(t)}))}function et(t,e){at.openPopup(t,e)}function nt(t,e){ct.openPopup(),ct.setData(t,e)}Promise.all([W.getUserInfo(),W.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];rt.setUserInfo(o.name,o.about),rt.setUserAvatar(o.avatar),Q=o._id,(K=new s({data:i,renderer:function(t){return K.setItem(X(t))}},".elements")).renderItems()})).catch((function(t){console.log(t)}));var rt=new U(".profile__title",".profile__subtitle",".profile__avatar"),ot=new S(".popup_type_edit-profile",(function(t,n){e(n,"Сохранение..."),W.patchUserInfo(t.name,t.occupation).then((function(e){rt.setUserInfo(t.name,t.occupation),ot.closePopup()})).catch((function(t){console.log(t)})).finally((function(){return e(n,"Сохранить")}))}));ot.setEventListeners();var it=new S(".popup_type_avatar",(function(t,n){e(n,"Сохранение..."),W.patchAvatar(t.avatar).then((function(t){rt.setUserAvatar(t.avatar),it.closePopup()})).catch((function(t){console.log(t)})).finally((function(){return e(n,"Сохранить")}))}));it.setEventListeners();var ut=new S(".popup_type_add-card",(function(t,n){e(n,"Сохранение...");var r={link:t.link,name:t.title};W.postNewCard(r).then((function(t){K.setNewItem(X(t)),ut.closePopup()})).catch((function(t){console.log(t)})).finally((function(){return e(n,"Сохранить")}))}));ut.setEventListeners();var at=new O(".popup_type_card");at.setEventListeners();var ct=new B(".popup_type_delete",(function(t,e){W.deleteCard(t).then((function(t){e.remove(),ct.closePopup()})).catch((function(t){console.log(t)}))}));ct.setEventListeners();var lt=new a(t,H);lt.enableValidation();var st=new a(t,M);st.enableValidation();var ft=new a(t,z);ft.enableValidation(),V.addEventListener("click",(function(){var t=rt.getUserInfo();F.value=t.name,J.value=t.occupation,ot.openPopup(),G.reset(),lt.setDefaultButton()})),N.addEventListener("click",(function(){ut.openPopup(),G.reset(),st.setDefaultButton()})),Z.addEventListener("click",(function(){it.openPopup(),z.reset(),ft.setDefaultButton()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxHQUNGLElBNkRBTyxHQUFZaUIsb0JBSVosSUFBTVMsR0FBdUIsSUFBSWpLLEVBQWNqRSxFQUFXb0wsR0FDMUQ4QyxHQUFxQkMsbUJBRXJCLElBQU1DLEdBQW9CLElBQUluSyxFQUFjakUsRUFBV3FMLEdBQ3ZEK0MsR0FBa0JELG1CQUVsQixJQUFNRSxHQUFzQixJQUFJcEssRUFBY2pFLEVBQVd1TCxHQUN6RDhDLEdBQW9CRixtQkFHcEJuRCxFQUFZN0gsaUJBQWtCLFNBQVMsV0FDckMsSUFBTW1MLEVBQU90QixHQUFTTCxjQUN0QjFCLEVBQWUxSSxNQUFRK0wsRUFBVyxLQUNsQ3BELEVBQXFCM0ksTUFBUStMLEVBQWlCLFdBQzlDakIsR0FBaUJkLFlBRWpCcEIsRUFBZ0I1QyxRQUNoQjJGLEdBQXFCSyxrQkFDdkIsSUFFQXhELEVBQVE1SCxpQkFBaUIsU0FBUyxXQUNoQzBLLEdBQWF0QixZQUNicEIsRUFBZ0I1QyxRQUNoQjZGLEdBQWtCRyxrQkFDcEIsSUFFQWpELEVBQTBCbkksaUJBQWlCLFNBQVMsV0FDbER1SyxHQUFZbkIsWUFDWmhCLEVBQWtCaEQsUUFDbEI4RixHQUFvQkUsa0JBQ3RCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMv0YFvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy/RgW9tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL9GBb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMv0YFvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMv0YFvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy/RgW9tcG9uZW50cy9Qb3B1cFd0aWhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy/RgW9tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMv0YFvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMv0YFvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2VsZW1lbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vINCe0LHRitGP0LLQu9C10L3QuNC1INC+0LHRitC10LrRgtCwLCDQuNGB0L/QvtC70YzQt9GD0LXQvNC+0LPQviDQsiDQutCw0YfQtdGB0YLQstC1INC60L7QvdGE0LjQs9CwXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbi1zYXZlJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoc3VibWl0QnV0dG9uLHRleHQpIHtcclxuICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG59IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZERlbGV0ZSwgaGFuZGxlTGlrZSwgaGFuZGxlRGlzbGlrZSkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2xpa2VTdGF0dXMgPSBmYWxzZTtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XHJcbiAgICB0aGlzLl9oYW5kbGVEaXNsaWtlID0gaGFuZGxlRGlzbGlrZTtcclxuICAgIFxyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBjYXJkVGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBsaWtlc1N1bShjYXJkKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IGNhcmQubGlrZXM7XHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZVRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBsaWtlQnV0dG9uKCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gICAgICB0aGlzLl9saWtlU3RhdHVzID0gdHJ1ZTsgIFxyXG4gIH1cclxuICBkaXNsaWtlQnV0dG9uKCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gICAgICB0aGlzLl9saWtlU3RhdHVzID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyDQnNC10YLQvtC00Ysg0LTQu9GPINGA0LDQsdC+0YLRiyDQu9Cw0LnQutCwICjRgdC10YDQstC10YApXHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICBpZiAodGhpcy5fbGlrZVN0YXR1cyA9PT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZSh0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURpc2xpa2UodGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQnNC10YLQvtC0INC+0LHRgNCw0LHQvtGC0LrQuCDRgdC70YPRiNCw0YLQtdC70LXQuVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5fdG9nZ2xlTGlrZSgpKTtcclxuICAgIFxyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzLl9jYXJkSWQsIHRoaXMuX2VsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMuX2NhcmRab29tLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSx0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g0J/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0L7RgtC60YDRi9GC0LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2VsZW1lbnRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJyk7XHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19yZW1vdmUnKTtcclxuICAgIHRoaXMuX2NhcmRab29tID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZVRleHQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLXRleHQnKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzO1xyXG5cclxuICAgIC8vINCV0YHQu9C4INCyINGB0L/QuNGB0LrQtSDQu9Cw0LnQutC+0LIg0LXRgdGC0Ywg0LzQvtC5IC0tINGB0LXRgNC00LXRh9C60L4g0YfQtdGA0L3QvtC1XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCh0aGlzLl9kYXRhLmxpa2VzW2ldLl9pZCkgPT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDQldGB0LvQuCDRjdGC0L4g0L3QtSDQvNC+0Y8g0LrQsNGA0YLQsCAtLSDRjyDQvdC1INC80L7Qs9GDINC10LUg0YPQtNCw0LvQuNGC0YxcclxuICAgIGlmICh0aGlzLl9kYXRhLm93bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmRCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn0iLCIvLyDQntCx0YrRj9Cy0LvQtdC90LjQtSDQutC70LDRgdGB0LBcclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vINCc0LXRgtC+0LTRiywg0L7RgtC+0LHRgNCw0LbQsNGO0YnQuNC1INC+0YjQuNCx0LrRgyDQsiDQstCw0LvQuNC00LDRhtC40LhcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgdGhpcy5fZm9ybUVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Zvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZm9ybUVycm9yLnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIH1cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIHRoaXMuX2Zvcm1FcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9mb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Zvcm1FcnJvci50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgLy8g0JzQtdGC0L7QtCwg0L/RgNC+0LLQtdGA0Y/RjtGJ0LjQuSDQstCw0LvQuNC00L3QvtGB0YLRjCDQuNC90L/Rg9GC0LBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQnNC10YLQvtC00Ysg0L/RgNC40YHQstCw0LjQstCw0L3QuNGPINCw0LrRgtC40LLQvdC+0YHRgtC4INC60L3QvtC/0LrQtVxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvci5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8g0JzQtdGC0L7QtCDQv9GA0L7QstC10YDQutC4INCy0LDQu9C40LTQvdGL0YUg0LjQvdC/0YPRgtC+0LIg0LTQu9GPINC60L3QvtC/0LrQuCBzdWJtaXRcclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge3JldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWR9KTtcclxuICB9XHJcblxyXG4gIC8vINCc0LXRgtC+0LQg0L7QsdGA0LDQsdC+0YLQutC4INC60L3QvtC/0LrQuCBzdWJtaXQg0Lgg0LXQtSDQsNC60YLQuNCy0L3QvtCz0L4g0YHQvtGB0YLQvtGP0L3QuNGPXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0JzQtdGC0L7QtCwg0LTQvtCx0LDQstC70Y/RjtGJ0LjQuSDRgdC70YPRiNCw0YLQtdC70LhcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PntcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINCf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INGB0LHRgNC+0YHQsCDQvtGI0LjQsdC60LhcclxuICBzZXREZWZhdWx0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pXHJcbiAgfVxyXG4gIFxyXG4gIC8vINCf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0LCDQutC+0YLQvtGA0YvQuSDRgdC+0LHQuNGA0LDQtdGCINC00LDQvdC90YvQtSDQuNC3INCy0LXRgNGB0YLQutC4XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBzZXROZXdJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT57XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlJyk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlUG9wdXAoKSk7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IGV2dC50YXJnZXQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fU3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tc2F2ZScpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpLCB0aGlzLl9TdWJtaXRCdXR0b24pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICBzdXBlci5jbG9zZVBvcHVwKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxufSIsImltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcmQtaW1hZ2UnKTtcclxuICAgICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcmQtdGl0bGUnKTtcclxuICAgfVxyXG5cclxuICAgb3BlblBvcHVwKG5hbWUsIGxpbmspIHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgIH1cclxufSIsImltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gIH1cclxuICBzZXREYXRhKGNhcmRJZCwgZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKHRoaXMuX2NhcmRJZCwgdGhpcy5fZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlck9jY3VwYXRpb24sIHVzZXJBdmF0YXIpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZSk7XHJcbiAgICB0aGlzLl91c2VyT2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck9jY3VwYXRpb24pO1xyXG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIG9jY3VwYXRpb246IHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKG5hbWUsb2NjdXBhdGlvbikge1xyXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fdXNlck9jY3VwYXRpb24udGV4dENvbnRlbnQgPSBvY2N1cGF0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckF2YXRhcigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckF2YXRhci50ZXh0Q29udGVudFxyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7YmFzZVVybCwgaGVhZGVyc30pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG4gIFxyXG4gIF9jaGVja1JlcyhyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXMocmVzKSk7XHJcbiAgfVxyXG4gIFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXMocmVzKSk7XHJcbiAgfVxyXG5cclxuICBwYXRjaFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXMocmVzKSk7XHJcbiAgfVxyXG4gIFxyXG4gIHBvc3ROZXdDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXMocmVzKSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1JlcyhyZXMpKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZENhcmQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkQ2FyZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1JlcyhyZXMpKTtcclxuICB9XHJcblxyXG4gIHBhdGNoQXZhdGFyKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluayxcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1JlcyhyZXMpKTtcclxuICB9XHJcbn1cclxuIiwiLy8g0J7QsdGK0Y/QstC70LXQvdC40LUg0LLRgdC10YUg0L/QtdGA0LXQvNC10L3QvdGL0YVcclxuLy8g0J7QsdGK0Y/QstC70LXQvdC40LUg0LrQvdC+0L/QvtC6INC00L7QsdCw0LLQuNGC0Ywg0Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0LIg0L/RgNC+0YTQuNC70LVcclxuZXhwb3J0IGNvbnN0IGNhcmRBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWFkZCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWVkaXQnKTtcclxuLy8g0J7QsdGK0Y/QstC70LXQvdC40LUg0YLQtdC80L/Qu9C10LnRgtCwINC4INC10LPQviDRgNC+0LTQuNGC0LXQu9GM0YHQutC+0LPQviDRjdC70LXQvNC10L3RgtCwXHJcbmV4cG9ydCBjb25zdCBpbnB1dFBvcHVwTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRbbmFtZT1uYW1lXScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRQb3B1cE9jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0W25hbWU9b2NjdXBhdGlvbl0nKTtcclxuLy8g0J7QsdGK0Y/QstC70LXQvdC40LUg0LjQvdC/0YPRgtC+0LIg0Lgg0YTQvtGA0LzRiyDQtNC70Y8g0LrQsNGA0YLQvtGH0LXQulxyXG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtW25hbWU9Y2FyZF0nKTtcclxuLy8g0KTQvtGA0LzRiyDQv9GA0L7RhNC40LvRjyDQuCDQutCw0YDRgtC+0YfQutC4INGE0L7RgNC8XHJcbmV4cG9ydCBjb25zdCBGb3JtRWxlbWVudFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1bbmFtZT1wcm9maWxlXScpO1xyXG5leHBvcnQgY29uc3QgRm9ybUVsZW1lbnRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtW25hbWU9Y2FyZF0nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5VcGR0ZUF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgRm9ybUVsZW1lbnRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1bbmFtZT11cGRhdGVdJyk7IiwiLy8g0JjQvNC/0L7RgNGCINCy0YHQtdGFINC60LvQsNGB0YHQvtCyINC4INC+0LHRitC10LrRgtC+0LIg0YEg0LTQsNC90L3Ri9C80LhcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHtzZWxlY3RvcnN9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQge3JlbmRlckxvYWRpbmd9IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJztcbmltcG9ydCB7Q2FyZH0gZnJvbSAnLi4v0YFvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gJy4uL9GBb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi/RgW9tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7UG9wdXBXaXRoRm9ybX0gZnJvbSAnLi4v0YFvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQge1BvcHVwV2l0aEltYWdlfSBmcm9tICcuLi/RgW9tcG9uZW50cy9Qb3B1cFd0aWhJbWFnZS5qcyc7XG5pbXBvcnQge1BvcHVwV2l0aENvbmZpcm1hdGlvbn0gZnJvbSAnLi4v0YFvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcbmltcG9ydCB7VXNlckluZm99IGZyb20gJy4uL9GBb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7QXBpfSBmcm9tICcuLi/RgW9tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IHtjYXJkQWRkLCBwcm9maWxlRWRpdCwgaW5wdXRQb3B1cE5hbWUsIGlucHV0UG9wdXBPY2N1cGF0aW9uLCBmb3JtRWxlbWVudENhcmQsIEZvcm1FbGVtZW50UHJvZmlsZSwgRm9ybUVsZW1lbnRDYXJkLCBidXR0b25PcGVuVXBkdGVBdmF0YXJGb3JtLCBGb3JtRWxlbWVudEF2YXRhcn0gZnJvbSAnLi4vdXRpbHMvZWxlbWVudHMuanMnO1xuXG5sZXQgY3JlYXRlQ2FyZFNlY3Rpb24gPSBudWxsO1xubGV0IHVzZXJJZCA9ICcnO1xuXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTY1JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc2NGU3NjkxNi1iYjlkLTQ1ZjItYWEwYS01NTVjMDRhNDllMWEnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbi8vINCh0LXRgNCy0LXRgC4g0J/QvtC70LXRh9C10L3QuNC1INC00LDQvdC90YvRhSDQviDQv9GA0L7RhNC40LvQtSDQuCDQutCw0YDRgtC+0YfQutCw0YVcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbi50aGVuKChyZXMpID0+IHtcbiAgY29uc3QgW1VzZXJkYXRhLCBDYXJkc2RhdGFdID0gcmVzO1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhVc2VyZGF0YS5uYW1lLCBVc2VyZGF0YS5hYm91dCk7XG4gIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoVXNlcmRhdGEuYXZhdGFyKTtcbiAgdXNlcklkID0gVXNlcmRhdGEuX2lkO1xuXG4gIGNyZWF0ZUNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24gKFxuICAgIHsgXG4gICAgICBkYXRhOiBDYXJkc2RhdGEsXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IGNyZWF0ZUNhcmRTZWN0aW9uLnNldEl0ZW0ocmVuZGVyQ2FyZChpdGVtKSlcbiAgICB9LCcuZWxlbWVudHMnKTtcbiAgICAgIGNyZWF0ZUNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG59KVxuLmNhdGNoKChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn0pO1xuXG4vLyDQpNGD0L3RhtC40Y8g0YDQtdC90LTQtdGA0LjQvdCz0LAg0LrQsNGA0YLQvtGH0LrQuCDQv9GA0Lgg0L/QvtC80L7RidC4INC60LvQsNGB0YHQvtCyIENhcmQg0LggU2VjdGlvbiDQuCDQtdC1INC60L7Qu9Cx0LXQutC4XG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkIChpdGVtLCAnI2VsZW1lbnQnLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZERlbGV0ZSwgaGFuZGxlTGlrZSwgaGFuZGxlRGlzbGlrZSk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVMaWtlKNGBYXJkKSB7XG4gIGFwaS5saWtlQ2FyZCjRgWFyZC5fY2FyZElkKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAg0YFhcmQubGlrZXNTdW0ocmVzKTtcbiAgICDRgWFyZC5saWtlQnV0dG9uKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURpc2xpa2Uo0YFhcmQpIHtcbiAgYXBpLmRpc2xpa2VDYXJkKNGBYXJkLl9jYXJkSWQpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICDRgWFyZC5saWtlc1N1bShyZXMpOyBcbiAgICDRgWFyZC5kaXNsaWtlQnV0dG9uKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gIHBvcHVwWm9vbUNhcmQub3BlblBvcHVwKG5hbWUsIGxpbmspO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkRGVsZXRlIChjYXJkSWQsIGVsZW1lbnQpIHtcbiAgcG9wdXBEZWxldGUub3BlblBvcHVwKCk7XG4gIHBvcHVwRGVsZXRlLnNldERhdGEoY2FyZElkLCBlbGVtZW50KTtcbn1cblxuLy8g0JrQvtC70LHQtdC60Lgg0LrQu9Cw0YHRgdC+0LJcbmZ1bmN0aW9uIGhhbmRsZUZvcm1EZWxldGUoY2FyZElkLCBlbGVtZW50KSB7XG4gIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcbiAgLnRoZW4oKHJlcykgPT4ge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgcG9wdXBEZWxldGUuY2xvc2VQb3B1cCgpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXRDYXJkKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uKSB7XG4gIHJlbmRlckxvYWRpbmcoc3VibWl0QnV0dG9uLCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICBsaW5rOiBpbnB1dExpc3RbJ2xpbmsnXSxcbiAgICBuYW1lOiBpbnB1dExpc3RbJ3RpdGxlJ11cbiAgfTtcbiAgYXBpLnBvc3ROZXdDYXJkKGNhcmREYXRhKVxuICAudGhlbigoZGF0YSkgPT57XG4gICAgY3JlYXRlQ2FyZFNlY3Rpb24uc2V0TmV3SXRlbShyZW5kZXJDYXJkKGRhdGEpKTtcbiAgICBwb3B1cEFkZENhcmQuY2xvc2VQb3B1cCgpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pXG4gIC5maW5hbGx5KCgpID0+IHJlbmRlckxvYWRpbmcoc3VibWl0QnV0dG9uLCfQodC+0YXRgNCw0L3QuNGC0YwnKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXRQcm9maWxlKElucHV0TGlzdCwgc3VibWl0QnV0dG9uKSB7XG4gIHJlbmRlckxvYWRpbmcoc3VibWl0QnV0dG9uLCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpO1xuICBhcGkucGF0Y2hVc2VySW5mbyhJbnB1dExpc3RbJ25hbWUnXSwgSW5wdXRMaXN0WydvY2N1cGF0aW9uJ10pXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhJbnB1dExpc3RbJ25hbWUnXSwgSW5wdXRMaXN0WydvY2N1cGF0aW9uJ10pO1xuICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2VQb3B1cCgpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pXG4gIC5maW5hbGx5KCgpID0+IHJlbmRlckxvYWRpbmcoc3VibWl0QnV0dG9uLCfQodC+0YXRgNCw0L3QuNGC0YwnKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXRBdmF0YXIoaW5wdXRMaXN0LCBzdWJtaXRCdXR0b24pIHtcbiAgcmVuZGVyTG9hZGluZyhzdWJtaXRCdXR0b24sJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XG4gIGFwaS5wYXRjaEF2YXRhcihpbnB1dExpc3RbJ2F2YXRhciddKVxuICAudGhlbigocmVzKT0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xuICAgIHBvcHVwQXZhdGFyLmNsb3NlUG9wdXAoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KVxuICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKHN1Ym1pdEJ1dHRvbiwn0KHQvtGF0YDQsNC90LjRgtGMJykpO1xufVxuXG4vLyDQrdC60LfQvNC10LzQv9C70Y/RgNGLINC60LvQsNGB0YHQvtCyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygnLnByb2ZpbGVfX3RpdGxlJywgJy5wcm9maWxlX19zdWJ0aXRsZScsICcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlJywgaGFuZGxlRm9ybVN1Ym1pdFByb2ZpbGUpO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hdmF0YXInLCBoYW5kbGVGb3JtU3VibWl0QXZhdGFyKTtcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxuXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYWRkLWNhcmQnLCBoYW5kbGVGb3JtU3VibWl0Q2FyZCk7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBab29tQ2FyZCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfY2FyZCcpO1xucG9wdXBab29tQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF90eXBlX2RlbGV0ZScsIGhhbmRsZUZvcm1EZWxldGUpO1xucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4vLyDQntCx0YDQsNCx0L7RgtC60LAg0LLQsNC70LjQtNCw0YbQuNC4INC/0YDQuCDQv9C+0LzQvtGJ0LggRm9ybVZhbGlkYXRvclxuY29uc3QgZm9ybVZhbGlkYXRvclByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihzZWxlY3RvcnMsIEZvcm1FbGVtZW50UHJvZmlsZSk7XG5mb3JtVmFsaWRhdG9yUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JDYXJkID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2VsZWN0b3JzLCBGb3JtRWxlbWVudENhcmQpO1xuZm9ybVZhbGlkYXRvckNhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtVmFsaWRhdG9yQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2VsZWN0b3JzLCBGb3JtRWxlbWVudEF2YXRhcik7XG5mb3JtVmFsaWRhdG9yQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8g0KHQu9GD0YjQsNGC0LXQu9C4XG5wcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyICgnY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGxpc3QgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dFBvcHVwTmFtZS52YWx1ZSA9IGxpc3RbJ25hbWUnXTtcbiAgaW5wdXRQb3B1cE9jY3VwYXRpb24udmFsdWUgPSBsaXN0WydvY2N1cGF0aW9uJ107XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlblBvcHVwKCk7XG4gIFxuICBmb3JtRWxlbWVudENhcmQucmVzZXQoKTtcbiAgZm9ybVZhbGlkYXRvclByb2ZpbGUuc2V0RGVmYXVsdEJ1dHRvbigpO1xufSk7XG5cbmNhcmRBZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwQWRkQ2FyZC5vcGVuUG9wdXAoKTtcbiAgZm9ybUVsZW1lbnRDYXJkLnJlc2V0KCk7XG4gIGZvcm1WYWxpZGF0b3JDYXJkLnNldERlZmF1bHRCdXR0b24oKTtcbn0pOyAgICBcblxuYnV0dG9uT3BlblVwZHRlQXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBBdmF0YXIub3BlblBvcHVwKCk7XG4gIEZvcm1FbGVtZW50QXZhdGFyLnJlc2V0KCk7XG4gIGZvcm1WYWxpZGF0b3JBdmF0YXIuc2V0RGVmYXVsdEJ1dHRvbigpO1xufSk7Il0sIm5hbWVzIjpbInNlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVuZGVyTG9hZGluZyIsInN1Ym1pdEJ1dHRvbiIsInRleHQiLCJ0ZXh0Q29udGVudCIsIkNhcmQiLCJkYXRhIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlTGlrZSIsImhhbmRsZURpc2xpa2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2RhdGEiLCJfbGluayIsImxpbmsiLCJfbmFtZSIsIm5hbWUiLCJfbGlrZXMiLCJsaWtlcyIsImxlbmd0aCIsIl9jYXJkSWQiLCJfaWQiLCJfbGlrZVN0YXR1cyIsIl91c2VySWQiLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZURpc2xpa2UiLCJfY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZCIsIl9lbGVtZW50TGlrZVRleHQiLCJfZWxlbWVudExpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlTGlrZSIsIl9kZWxldGVDYXJkQnV0dG9uIiwiX2VsZW1lbnQiLCJfY2FyZFpvb20iLCJfZ2V0VGVtcGxhdGUiLCJfZWxlbWVudEltYWdlIiwiX2VsZW1lbnRUaXRsZSIsInNyYyIsImFsdCIsImkiLCJsaWtlQnV0dG9uIiwib3duZXIiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dCIsImVycm9yTWVzc2FnZSIsIl9mb3JtRXJyb3IiLCJjb25jYXQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImRpc2FibGVkIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl90aGlzMiIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX2NvbnRhaW5lciIsIl9yZW5kZXJlciIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImNsb3NlUG9wdXAiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cENsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiaGFuZGxlU3VibWl0Rm9ybSIsImNhbGwiLCJfaGFuZGxlU3VibWl0Rm9ybSIsIl9mb3JtRWxlbWVudCIsIl9TdWJtaXRCdXR0b24iLCJfZm9ybVZhbHVlcyIsIl90aGlzMyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfY2FyZEltYWdlIiwiX2NhcmRUaXRsZSIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNhcmRJZCIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyT2NjdXBhdGlvbiIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlck9jY3VwYXRpb24iLCJfdXNlckF2YXRhciIsIm9jY3VwYXRpb24iLCJhdmF0YXIiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrUmVzIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl90aGlzNCIsIl90aGlzNSIsIl90aGlzNiIsImlkQ2FyZCIsIl90aGlzNyIsIl90aGlzOCIsImNhcmRBZGQiLCJwcm9maWxlRWRpdCIsImlucHV0UG9wdXBOYW1lIiwiaW5wdXRQb3B1cE9jY3VwYXRpb24iLCJmb3JtRWxlbWVudENhcmQiLCJGb3JtRWxlbWVudFByb2ZpbGUiLCJGb3JtRWxlbWVudENhcmQiLCJidXR0b25PcGVuVXBkdGVBdmF0YXJGb3JtIiwiRm9ybUVsZW1lbnRBdmF0YXIiLCJjcmVhdGVDYXJkU2VjdGlvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJyZW5kZXJDYXJkIiwiZ2VuZXJhdGVDYXJkIiwi0YFhcmQiLCJsaWtlQ2FyZCIsImxpa2VzU3VtIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZGlzbGlrZUNhcmQiLCJkaXNsaWtlQnV0dG9uIiwicG9wdXBab29tQ2FyZCIsIm9wZW5Qb3B1cCIsInBvcHVwRGVsZXRlIiwic2V0RGF0YSIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiX3JlcyIsIlVzZXJkYXRhIiwiQ2FyZHNkYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJzZXRJdGVtIiwicmVuZGVySXRlbXMiLCJwb3B1cEVkaXRQcm9maWxlIiwiSW5wdXRMaXN0IiwicGF0Y2hVc2VySW5mbyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwQXZhdGFyIiwiaW5wdXRMaXN0IiwicGF0Y2hBdmF0YXIiLCJwb3B1cEFkZENhcmQiLCJjYXJkRGF0YSIsInBvc3ROZXdDYXJkIiwic2V0TmV3SXRlbSIsImRlbGV0ZUNhcmQiLCJmb3JtVmFsaWRhdG9yUHJvZmlsZSIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtVmFsaWRhdG9yQ2FyZCIsImZvcm1WYWxpZGF0b3JBdmF0YXIiLCJsaXN0Iiwic2V0RGVmYXVsdEJ1dHRvbiJdLCJzb3VyY2VSb290IjoiIn0=